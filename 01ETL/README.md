# Exploração dos Dados (*Extract, Transform and Load* -- ETL)

Este bloco de notas contém todo o código usado para seleção, limpeza e transformação (extração, transformação, carregamento ou ETL, do inglês *Extract Transform Load*) das fontes de dados de bairros e atividades econômicas para aplicação das técnicas de análise de dados a serem estudadas.

O bloco de notas Jupyter [PreparacaoDados.ipynb](https://github.com/LabPEC/ProjetoAnaliseDados/blob/main/01ETL/PreparacaoDados.ipynb) recebe como entrada o arquivo de atividades econômicas do Estado do Espírito Santo [ATIVECO_ES](https://github.com/LabPEC/ProjetoAnaliseDados/blob/main/01ETL/INPUT/AtividadesEconomicas_ES.csv.tar.gz) anonimizado e dois arquivos públicos extraídos das plataformas do IBGE: [AtividadesEconomicas_IBGE.xlsx](https://github.com/LabPEC/ProjetoAnaliseDados/blob/main/01ETL/INPUT/AtividadesEconomicas_IBGE.xlsx) e [BairrosGV_IBGE.csv](https://github.com/LabPEC/ProjetoAnaliseDados/blob/main/01ETL/INPUT/BairrosGV_IBGE.csv).

O arquivo [AtividadesEconomicas_IBGE.xlsx](https://github.com/LabPEC/ProjetoAnaliseDados/blob/main/01ETL/INPUT/AtividadesEconomicas_IBGE.xlsx) descreve a estrutura detalhada da CNAE-Subclasses 2.3 (códigos nacionais e suas respectivas atividades econômicas).
Já o arquivo [BairrosGV_IBGE.csv](https://github.com/LabPEC/ProjetoAnaliseDados/blob/main/01ETL/INPUT/BairrosGV_IBGE.csv) contém os códigos e os bairros dos municípios da Grande Vitória (GV): Cariacica, Serra, Viana, Vila Velha e Vitória. Os códigos dos bairros da GV foram definidos pelo IBGE pois seus municípios tiveram suas leis de bairros aprovadas até agosto de 2010. Todos os arquivos de entrada estão posicionados no diretório [INPUT](https://github.com/LabPEC/ProjetoAnaliseDados/tree/main/01ETL/INPUT)

Como saída do processamento desse bloco de notas, tem-se um [arquivo de saida](https://github.com/LabPEC/ProjetoAnaliseDados/blob/main/02Explorar/INPUT/600Pivot_Flat.csv) contendo uma tabela cujas linhas contêm os bairros presentes no arquivo ATIVECO_ES (mapeadas para os códigos de bairros do IBGE) e cujas colunas contêm as atividades presentes no arquivo ATIVECO_ES (mapeadas para os códigos de atividades do CNAE agrupados por DIVISÃO). O conteúdo de cada célula da tabela contém a quantidade daquela atividade (coluna) naquele bairro (linha). 

A definição CNAE para atividades econômicas segue uma estrutura hierárquica de códigos (SEÇÕES, DIVISÕES, GRUPOS, CLASSES E SUBCLASSES) e suas denominações. No arquivo de entrada de atividades nos bairros do Espírito Santo aparece apenas a denominação da atividade. Após o processamento, as atividades estão agrupadas pelo código de DIVISÕES, por exemplo, a DIVISÃO "Comércio Varejista" tem código 47 (ver [600Pivot_Flat.csv](https://github.com/LabPEC/ProjetoAnaliseDados/blob/main/02Explorar/INPUT/600Pivot_Flat.csv))


O [arquivo de saida](https://github.com/LabPEC/ProjetoAnaliseDados/blob/main/02Explorar/INPUT/600Pivot_Flat.csv)  de saida servirá de [entrada](https://github.com/LabPEC/ProjetoAnaliseDados/tree/main/02Explorar/INPUT) para o próximo módulo (bloco de notas) de Exploração dos Dados. Todos os arquivos de saida estão posicionados no diretório [OUTPUT](https://github.com/LabPEC/ProjetoAnaliseDados/tree/main/01ETL/OUTPUT)

